"use strict";!function(){window.backend={};var t="https://echo.htmlacademy.ru",o=document.querySelector("#success"),s=document.querySelector("#error"),c=(s.querySelector(".message__button"),window.getComputedStyle(o).getPropertyValue("display")),d=window.getComputedStyle(o).getPropertyValue("display");window.backend.upload=function(e,n){u(t,"POST",n,e)},window.backend.onSuccessUpLoad=function(){o.style.display="block";var n=function(){o.removeEventListener("click",e),document.removeEventListener("keydown",t)},e=function(){o.style.display="none",n()},t=function(e){"block"==c&&27===e.keyCode&&(o.style.display="none",n())};o.addEventListener("click",e),document.addEventListener("keydown",t)};var i=function(e){s.style.display="block";var n=function(){successMessageClone.removeEventListener("click",removeSuccessMessage),document.removeEventListener("keydown",onSuccessEscDown)};s.addEventListener("click",function(){s.style.display="none",n()}),document.addEventListener("keydown",function(e){"block"==d&&27===e.keyCode&&(s.style.display="none",n())})},u=function(e,n,t,o){var s=new XMLHttpRequest;s.timeout=1e4,s.responseType="json";s.addEventListener("error",function(){i()}),s.addEventListener("timeout",function(){i(s.timeout)});s.addEventListener("load",function(){200===s.status?t(s.response):i((s.status,s.statusText))}),s.open(n,e),s.send("POST"===n?o:void 0)}}();